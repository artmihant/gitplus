# GitPlus

Небольшой CLI‑скрипт для автоматизации типового цикла коммита в Git‑репозитории:

- добавление всех изменённых и новых файлов в индекс;
- автоматическое увеличение версии в файле `VERSION`;
- формирование осмысленного сообщения коммита с датой и временем;
- создание коммита одной командой.


## Как это работает

Скрипт `gitplus.py`:

1. Находит корень Git‑репозитория, поднимаясь вверх от текущей директории, и проверяет, что перед нами валидный репозиторий.
2. Анализирует состояние рабочего каталога:
   - учитывает как отслеживаемые, так и **untracked** файлы;
   - корректно работает даже с пустым (без единого коммита) репозиторием.
3. Автоматически выполняет `git add` для:
   - всех изменённых файлов;
   - всех новых (untracked) файлов;
   - файла `VERSION`, если он был изменён.
4. Читает текущую версию из файла `VERSION` (или использует `0.0.0`, если файл отсутствует),
   увеличивает **последний числовой сегмент** на `+1` и записывает обновлённое значение обратно.
5. Формирует сообщение коммита в виде:

   ```text
   <новая_версия> [YYYY-MM-DD HH:MM:SS]: <опциональный текст>
   ```
 
   Источник «опционального текста»:
   - аргументы командной строки (`python gitplus.py ваш текст`);
   - либо содержимое файла `LAST_COMMIT`, если аргументов нет и файл существует.

Если изменений нет, скрипт выводит `Nothing to commit!` и завершает работу без создания коммита.

## Требования

- Python 3.7+ (рекомендуется актуальная 3.x);
- установленный `git`;
- библиотека `GitPython`.

Установка зависимости:

```bash
pip install gitpython
```

## Использование

Запускайте скрипт **из любой вложенной директории** внутри репозитория — он сам найдёт корень:

```bash
python gitplus.py
```

или, если файл сделан исполняемым:

```bash
./gitplus.py
```

### Примеры

- Коммит с сообщением из аргументов:

  ```bash
  python gitplus.py "Исправил обработку ошибок"
  ```

- Коммит с сообщением из файла `LAST_COMMIT`:

  1. Создайте файл:

     ```bash
     echo "Рефакторинг модуля авторизации" > LAST_COMMIT
     ```

  2. Запустите:

     ```bash
     python gitplus.py
     ```

Во всех случаях версия в файле `VERSION` будет увеличена автоматически, а файл `VERSION` включён в коммит.

## Ограничения и замечания

- Скрипт предназначен для локальной автоматизации и **не заменяет** полноценные релизные/CI‑сценарии.
- Версия увеличивается только по последнему числу в строке вида `MAJOR.MINOR.PATCH`.
- Для первого коммита (когда в репозитории нет ни одного коммита) скрипт покажет список добавляемых файлов с пометкой «Первый коммит:».
